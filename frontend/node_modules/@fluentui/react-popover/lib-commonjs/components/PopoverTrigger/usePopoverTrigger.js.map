{"version":3,"sources":["usePopoverTrigger.js"],"sourcesContent":["import * as React from 'react';\nimport { applyTriggerPropsToChildren, getTriggerChild, mergeCallbacks, useMergedRefs, useEventCallback } from '@fluentui/react-utilities';\nimport { useModalAttributes } from '@fluentui/react-tabster';\nimport { usePopoverContext_unstable } from '../../popoverContext';\nimport { useARIAButtonProps } from '@fluentui/react-aria';\nimport { Escape } from '@fluentui/keyboard-keys';\n/**\n * Create the state required to render PopoverTrigger.\n *\n * The returned state can be modified with hooks such as usePopoverTriggerStyles,\n * before being passed to renderPopoverTrigger_unstable.\n *\n * @param props - props from this instance of PopoverTrigger\n */ export const usePopoverTrigger_unstable = (props)=>{\n    const { children , disableButtonEnhancement =false  } = props;\n    const child = getTriggerChild(children);\n    const open = usePopoverContext_unstable((context)=>context.open);\n    const setOpen = usePopoverContext_unstable((context)=>context.setOpen);\n    const toggleOpen = usePopoverContext_unstable((context)=>context.toggleOpen);\n    const triggerRef = usePopoverContext_unstable((context)=>context.triggerRef);\n    const openOnHover = usePopoverContext_unstable((context)=>context.openOnHover);\n    const openOnContext = usePopoverContext_unstable((context)=>context.openOnContext);\n    const { triggerAttributes  } = useModalAttributes();\n    const onContextMenu = (e)=>{\n        if (openOnContext) {\n            e.preventDefault();\n            setOpen(e, true);\n        }\n    };\n    const onClick = (e)=>{\n        if (!openOnContext) {\n            toggleOpen(e);\n        }\n    };\n    const onKeyDown = (e)=>{\n        if (e.key === Escape && open) {\n            setOpen(e, false);\n            // stop propagation to avoid conflicting with other elements that listen for `Escape`\n            // e,g: Dialog, Menu\n            e.stopPropagation();\n        }\n    };\n    const onMouseEnter = (e)=>{\n        if (openOnHover) {\n            setOpen(e, true);\n        }\n    };\n    const onMouseLeave = (e)=>{\n        if (openOnHover) {\n            setOpen(e, false);\n        }\n    };\n    const contextMenuProps = {\n        ...triggerAttributes,\n        'aria-expanded': `${open}`,\n        ...child === null || child === void 0 ? void 0 : child.props,\n        onMouseEnter: useEventCallback(mergeCallbacks(child === null || child === void 0 ? void 0 : child.props.onMouseEnter, onMouseEnter)),\n        onMouseLeave: useEventCallback(mergeCallbacks(child === null || child === void 0 ? void 0 : child.props.onMouseLeave, onMouseLeave)),\n        onContextMenu: useEventCallback(mergeCallbacks(child === null || child === void 0 ? void 0 : child.props.onContextMenu, onContextMenu)),\n        ref: useMergedRefs(triggerRef, child === null || child === void 0 ? void 0 : child.ref)\n    };\n    const triggerChildProps = {\n        ...contextMenuProps,\n        onClick: useEventCallback(mergeCallbacks(child === null || child === void 0 ? void 0 : child.props.onClick, onClick)),\n        onKeyDown: useEventCallback(mergeCallbacks(child === null || child === void 0 ? void 0 : child.props.onKeyDown, onKeyDown))\n    };\n    const ariaButtonTriggerChildProps = useARIAButtonProps((child === null || child === void 0 ? void 0 : child.type) === 'button' || (child === null || child === void 0 ? void 0 : child.type) === 'a' ? child.type : 'div', triggerChildProps);\n    return {\n        children: applyTriggerPropsToChildren(props.children, useARIAButtonProps((child === null || child === void 0 ? void 0 : child.type) === 'button' || (child === null || child === void 0 ? void 0 : child.type) === 'a' ? child.type : 'div', openOnContext ? contextMenuProps : disableButtonEnhancement ? triggerChildProps : ariaButtonTriggerChildProps))\n    };\n};\n"],"names":["usePopoverTrigger_unstable","props","children","disableButtonEnhancement","child","getTriggerChild","open","usePopoverContext_unstable","context","setOpen","toggleOpen","triggerRef","openOnHover","openOnContext","triggerAttributes","useModalAttributes","onContextMenu","e","preventDefault","onClick","onKeyDown","key","Escape","stopPropagation","onMouseEnter","onMouseLeave","contextMenuProps","useEventCallback","mergeCallbacks","ref","useMergedRefs","triggerChildProps","ariaButtonTriggerChildProps","useARIAButtonProps","type","applyTriggerPropsToChildren"],"mappings":"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"}
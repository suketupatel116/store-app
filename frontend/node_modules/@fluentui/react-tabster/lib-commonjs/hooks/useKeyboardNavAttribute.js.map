{"version":3,"sources":["useKeyboardNavAttribute.js"],"sourcesContent":["import { createKeyborg } from 'keyborg';\nimport { useEffect, useMemo, useRef } from 'react';\nimport { KEYBOARD_NAV_ATTRIBUTE } from '../focus/constants';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\n/**\n * Instantiates [keyborg](https://github.com/microsoft/keyborg) and adds `data-keyboard-nav`\n * attribute to a referenced element to ensure keyboard navigation awareness\n * synced to keyborg logic without having to cause a re-render on react tree.\n */ export function useKeyboardNavAttribute() {\n    const { targetDocument  } = useFluent();\n    const keyborg = useMemo(()=>targetDocument && createKeyborg(targetDocument.defaultView), [\n        targetDocument\n    ]);\n    const ref = useRef(null);\n    useEffect(()=>{\n        if (keyborg) {\n            setBooleanAttribute(ref, KEYBOARD_NAV_ATTRIBUTE, keyborg.isNavigatingWithKeyboard());\n            const cb = (next)=>{\n                setBooleanAttribute(ref, KEYBOARD_NAV_ATTRIBUTE, next);\n            };\n            keyborg.subscribe(cb);\n            return ()=>keyborg.unsubscribe(cb);\n        }\n    }, [\n        keyborg\n    ]);\n    return ref;\n}\nfunction setBooleanAttribute(elementRef, attribute, value) {\n    if (!elementRef.current) {\n        return;\n    }\n    if (value) {\n        elementRef.current.setAttribute(attribute, '');\n    } else {\n        elementRef.current.removeAttribute(attribute);\n    }\n}\n"],"names":["useKeyboardNavAttribute","targetDocument","useFluent","keyborg","useMemo","createKeyborg","defaultView","ref","useRef","useEffect","setBooleanAttribute","KEYBOARD_NAV_ATTRIBUTE","isNavigatingWithKeyboard","cb","next","subscribe","unsubscribe","elementRef","attribute","value","current","setAttribute","removeAttribute"],"mappings":";;;;+BAQoBA;;aAAAA;;yBARU;uBACa;2BACJ;qCACS;AAKrC,SAASA,0BAA0B;IAC1C,MAAM,EAAEC,eAAc,EAAG,GAAGC,IAAAA,uCAAS;IACrC,MAAMC,UAAUC,IAAAA,cAAO,EAAC,IAAIH,kBAAkBI,IAAAA,sBAAa,EAACJ,eAAeK,WAAW,GAAG;QACrFL;KACH;IACD,MAAMM,MAAMC,IAAAA,aAAM,EAAC,IAAI;IACvBC,IAAAA,gBAAS,EAAC,IAAI;QACV,IAAIN,SAAS;YACTO,oBAAoBH,KAAKI,iCAAsB,EAAER,QAAQS,wBAAwB;YACjF,MAAMC,KAAK,CAACC,OAAO;gBACfJ,oBAAoBH,KAAKI,iCAAsB,EAAEG;YACrD;YACAX,QAAQY,SAAS,CAACF;YAClB,OAAO,IAAIV,QAAQa,WAAW,CAACH;QACnC,CAAC;IACL,GAAG;QACCV;KACH;IACD,OAAOI;AACX;AACA,SAASG,oBAAoBO,UAAU,EAAEC,SAAS,EAAEC,KAAK,EAAE;IACvD,IAAI,CAACF,WAAWG,OAAO,EAAE;QACrB;IACJ,CAAC;IACD,IAAID,OAAO;QACPF,WAAWG,OAAO,CAACC,YAAY,CAACH,WAAW;IAC/C,OAAO;QACHD,WAAWG,OAAO,CAACE,eAAe,CAACJ;IACvC,CAAC;AACL"}
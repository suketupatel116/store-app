{"version":3,"sources":["useDialogSurface.js"],"sourcesContent":["import * as React from 'react';\nimport { getNativeElementProps, resolveShorthand, useEventCallback, useMergedRefs, isResolvedShorthand } from '@fluentui/react-utilities';\nimport { useDialogContext_unstable } from '../../contexts';\nimport { Escape } from '@fluentui/keyboard-keys';\n/**\n * Create the state required to render DialogSurface.\n *\n * The returned state can be modified with hooks such as useDialogSurfaceStyles_unstable,\n * before being passed to renderDialogSurface_unstable.\n *\n * @param props - props from this instance of DialogSurface\n * @param ref - reference to root HTMLElement of DialogSurface\n */ export const useDialogSurface_unstable = (props, ref)=>{\n    const modalType = useDialogContext_unstable((ctx)=>ctx.modalType);\n    const modalAttributes = useDialogContext_unstable((ctx)=>ctx.modalAttributes);\n    const dialogRef = useDialogContext_unstable((ctx)=>ctx.dialogRef);\n    const open = useDialogContext_unstable((ctx)=>ctx.open);\n    const requestOpenChange = useDialogContext_unstable((ctx)=>ctx.requestOpenChange);\n    const dialogTitleID = useDialogContext_unstable((ctx)=>ctx.dialogTitleId);\n    const handledBackdropClick = useEventCallback((event)=>{\n        if (isResolvedShorthand(props.backdrop)) {\n            var _props_backdrop, _props_backdrop_onClick;\n            (_props_backdrop_onClick = (_props_backdrop = props.backdrop).onClick) === null || _props_backdrop_onClick === void 0 ? void 0 : _props_backdrop_onClick.call(_props_backdrop, event);\n        }\n        if (modalType === 'modal' && !event.isDefaultPrevented()) {\n            requestOpenChange({\n                event,\n                open: false,\n                type: 'backdropClick'\n            });\n        }\n    });\n    const handleKeyDown = useEventCallback((event)=>{\n        var _props_onKeyDown;\n        (_props_onKeyDown = props.onKeyDown) === null || _props_onKeyDown === void 0 ? void 0 : _props_onKeyDown.call(props, event);\n        if (event.key === Escape && !event.isDefaultPrevented()) {\n            requestOpenChange({\n                event,\n                open: false,\n                type: 'escapeKeyDown'\n            });\n            // stop propagation to avoid conflicting with other elements that listen for `Escape`\n            // e,g: nested Dialog, Popover, Menu and Tooltip\n            event.stopPropagation();\n        }\n    });\n    const backdrop = resolveShorthand(props.backdrop, {\n        required: open && modalType !== 'non-modal',\n        defaultProps: {\n            'aria-hidden': 'true'\n        }\n    });\n    if (backdrop) {\n        backdrop.onClick = handledBackdropClick;\n    }\n    var _props_as;\n    return {\n        components: {\n            backdrop: 'div',\n            root: 'div'\n        },\n        backdrop,\n        root: getNativeElementProps((_props_as = props.as) !== null && _props_as !== void 0 ? _props_as : 'div', {\n            tabIndex: -1,\n            'aria-modal': modalType !== 'non-modal',\n            role: modalType === 'alert' ? 'alertdialog' : 'dialog',\n            'aria-labelledby': props['aria-label'] ? undefined : dialogTitleID,\n            ...props,\n            ...modalAttributes,\n            onKeyDown: handleKeyDown,\n            ref: useMergedRefs(ref, dialogRef)\n        })\n    };\n};\n"],"names":["useDialogSurface_unstable","props","ref","modalType","useDialogContext_unstable","ctx","modalAttributes","dialogRef","open","requestOpenChange","dialogTitleID","dialogTitleId","handledBackdropClick","useEventCallback","event","isResolvedShorthand","backdrop","_props_backdrop","_props_backdrop_onClick","onClick","call","isDefaultPrevented","type","handleKeyDown","_props_onKeyDown","onKeyDown","key","Escape","stopPropagation","resolveShorthand","required","defaultProps","_props_as","components","root","getNativeElementProps","as","tabIndex","role","undefined","useMergedRefs"],"mappings":";;;;+BAYiBA;;aAAAA;;;6DAZM;gCACuF;0BACpE;8BACnB;AASZ,MAAMA,4BAA4B,CAACC,OAAOC,MAAM;IACvD,MAAMC,YAAYC,IAAAA,mCAAyB,EAAC,CAACC,MAAMA,IAAIF,SAAS;IAChE,MAAMG,kBAAkBF,IAAAA,mCAAyB,EAAC,CAACC,MAAMA,IAAIC,eAAe;IAC5E,MAAMC,YAAYH,IAAAA,mCAAyB,EAAC,CAACC,MAAMA,IAAIE,SAAS;IAChE,MAAMC,OAAOJ,IAAAA,mCAAyB,EAAC,CAACC,MAAMA,IAAIG,IAAI;IACtD,MAAMC,oBAAoBL,IAAAA,mCAAyB,EAAC,CAACC,MAAMA,IAAII,iBAAiB;IAChF,MAAMC,gBAAgBN,IAAAA,mCAAyB,EAAC,CAACC,MAAMA,IAAIM,aAAa;IACxE,MAAMC,uBAAuBC,IAAAA,gCAAgB,EAAC,CAACC,QAAQ;QACnD,IAAIC,IAAAA,mCAAmB,EAACd,MAAMe,QAAQ,GAAG;YACrC,IAAIC,iBAAiBC;YACpBA,CAAAA,0BAA0B,AAACD,CAAAA,kBAAkBhB,MAAMe,QAAQ,AAAD,EAAGG,OAAO,AAAD,MAAO,IAAI,IAAID,4BAA4B,KAAK,IAAI,KAAK,IAAIA,wBAAwBE,IAAI,CAACH,iBAAiBH,MAAM;QACzL,CAAC;QACD,IAAIX,cAAc,WAAW,CAACW,MAAMO,kBAAkB,IAAI;YACtDZ,kBAAkB;gBACdK;gBACAN,MAAM,KAAK;gBACXc,MAAM;YACV;QACJ,CAAC;IACL;IACA,MAAMC,gBAAgBV,IAAAA,gCAAgB,EAAC,CAACC,QAAQ;QAC5C,IAAIU;QACHA,CAAAA,mBAAmBvB,MAAMwB,SAAS,AAAD,MAAO,IAAI,IAAID,qBAAqB,KAAK,IAAI,KAAK,IAAIA,iBAAiBJ,IAAI,CAACnB,OAAOa,MAAM;QAC3H,IAAIA,MAAMY,GAAG,KAAKC,oBAAM,IAAI,CAACb,MAAMO,kBAAkB,IAAI;YACrDZ,kBAAkB;gBACdK;gBACAN,MAAM,KAAK;gBACXc,MAAM;YACV;YACA,qFAAqF;YACrF,gDAAgD;YAChDR,MAAMc,eAAe;QACzB,CAAC;IACL;IACA,MAAMZ,WAAWa,IAAAA,gCAAgB,EAAC5B,MAAMe,QAAQ,EAAE;QAC9Cc,UAAUtB,QAAQL,cAAc;QAChC4B,cAAc;YACV,eAAe;QACnB;IACJ;IACA,IAAIf,UAAU;QACVA,SAASG,OAAO,GAAGP;IACvB,CAAC;IACD,IAAIoB;IACJ,OAAO;QACHC,YAAY;YACRjB,UAAU;YACVkB,MAAM;QACV;QACAlB;QACAkB,MAAMC,IAAAA,qCAAqB,EAAC,AAACH,CAAAA,YAAY/B,MAAMmC,EAAE,AAAD,MAAO,IAAI,IAAIJ,cAAc,KAAK,IAAIA,YAAY,KAAK,EAAE;YACrGK,UAAU,CAAC;YACX,cAAclC,cAAc;YAC5BmC,MAAMnC,cAAc,UAAU,gBAAgB,QAAQ;YACtD,mBAAmBF,KAAK,CAAC,aAAa,GAAGsC,YAAY7B,aAAa;YAClE,GAAGT,KAAK;YACR,GAAGK,eAAe;YAClBmB,WAAWF;YACXrB,KAAKsC,IAAAA,6BAAa,EAACtC,KAAKK;QAC5B;IACJ;AACJ"}
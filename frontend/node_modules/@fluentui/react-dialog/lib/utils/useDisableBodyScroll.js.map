{"version":3,"sources":["useDisableBodyScroll.ts"],"sourcesContent":["import { useFluent_unstable } from '@fluentui/react-shared-contexts';\nimport { useCallback } from 'react';\n\nconst disableScrollElementProp = '__fluentDisableScrollElement' as const;\n\ntype FluentDisableScrollElement = HTMLElement & {\n  [disableScrollElementProp]: {\n    count: number;\n    previousOverflowStyle: string;\n    previousPaddingRightStyle: string;\n  };\n};\n\n/**\n * hook that disables body scrolling through `overflow: hidden` CSS property\n */\nexport function useDisableBodyScroll() {\n  const { targetDocument } = useFluent_unstable();\n  return useCallback(() => {\n    if (targetDocument) {\n      return disableScroll(targetDocument.body);\n    }\n  }, [targetDocument]);\n}\n\n/**\n * disables scrolling from a given element through `overflow: hidden` CSS property\n * @param target - element to disable scrolling from\n * @returns a method for enabling scrolling again\n */\nexport function disableScroll(target: HTMLElement) {\n  const { clientWidth } = target.ownerDocument.documentElement;\n  const innerWidth = target.ownerDocument.defaultView?.innerWidth ?? 0;\n  assertIsDisableScrollElement(target);\n  if (target[disableScrollElementProp].count === 0) {\n    target.style.overflow = 'hidden';\n    target.style.paddingRight = `${innerWidth - clientWidth}px`;\n  }\n  target[disableScrollElementProp].count++;\n  return () => {\n    target[disableScrollElementProp].count--;\n    if (target[disableScrollElementProp].count === 0) {\n      target.style.overflow = target[disableScrollElementProp].previousOverflowStyle;\n      target.style.paddingRight = target[disableScrollElementProp].previousPaddingRightStyle;\n    }\n  };\n}\n\nfunction assertIsDisableScrollElement(element: HTMLElement): asserts element is FluentDisableScrollElement {\n  (element as FluentDisableScrollElement)[disableScrollElementProp] ??= {\n    count: 0,\n    previousOverflowStyle: element.style.overflow,\n    previousPaddingRightStyle: element.style.paddingRight,\n  };\n}\n"],"names":["element","disableScrollElementProp","useFluent_unstable","useCallback","useDisableBodyScroll","targetDocument","disableScroll","body","target","clientWidth","ownerDocument","documentElement","innerWidth","defaultView","assertIsDisableScrollElement","count","style","overflow","paddingRight","previousOverflowStyle","previousPaddingRightStyle"],"mappings":"IAiDGA,UAAuCC;AAjD1C,SAASC,kBAAkB,QAAQ,kCAAkC;AACrE,SAASC,WAAW,QAAQ,QAAQ;AAEpC,MAAMF,2BAA2B;AAUjC;;CAEC,GACD,OAAO,SAASG,uBAAuB;IACrC,MAAM,EAAEC,eAAc,EAAE,GAAGH;IAC3B,OAAOC,YAAY,IAAM;QACvB,IAAIE,gBAAgB;YAClB,OAAOC,cAAcD,eAAeE,IAAI;QAC1C,CAAC;IACH,GAAG;QAACF;KAAe;AACrB,CAAC;AAED;;;;CAIC,GACD,OAAO,SAASC,cAAcE,MAAmB,EAAE;QAE9BA;IADnB,MAAM,EAAEC,YAAW,EAAE,GAAGD,OAAOE,aAAa,CAACC,eAAe;QACzCH;IAAnB,MAAMI,aAAaJ,CAAAA,+CAAAA,CAAAA,oCAAAA,OAAOE,aAAa,CAACG,WAAW,cAAhCL,+CAAAA,KAAAA,IAAAA,kCAAkCI,UAAU,cAA5CJ,0DAAAA,+CAAgD,CAAC;IACpEM,6BAA6BN;IAC7B,IAAIA,MAAM,CAACP,yBAAyB,CAACc,KAAK,KAAK,GAAG;QAChDP,OAAOQ,KAAK,CAACC,QAAQ,GAAG;QACxBT,OAAOQ,KAAK,CAACE,YAAY,GAAG,CAAC,EAAEN,aAAaH,YAAY,EAAE,CAAC;IAC7D,CAAC;IACDD,MAAM,CAACP,yBAAyB,CAACc,KAAK;IACtC,OAAO,IAAM;QACXP,MAAM,CAACP,yBAAyB,CAACc,KAAK;QACtC,IAAIP,MAAM,CAACP,yBAAyB,CAACc,KAAK,KAAK,GAAG;YAChDP,OAAOQ,KAAK,CAACC,QAAQ,GAAGT,MAAM,CAACP,yBAAyB,CAACkB,qBAAqB;YAC9EX,OAAOQ,KAAK,CAACE,YAAY,GAAGV,MAAM,CAACP,yBAAyB,CAACmB,yBAAyB;QACxF,CAAC;IACH;AACF,CAAC;AAED,SAASN,6BAA6Bd,OAAoB,EAAiD;;IACzG,MAACA,WAAAA,QAAsC,CAACC,4BAAAA,yBAAyB,iCAAhED,QAAsC,CAACC,0BAAyB,GAAK;QACpEc,OAAO;QACPI,uBAAuBnB,QAAQgB,KAAK,CAACC,QAAQ;QAC7CG,2BAA2BpB,QAAQgB,KAAK,CAACE,YAAY;IACvD,CAAC;AACH"}
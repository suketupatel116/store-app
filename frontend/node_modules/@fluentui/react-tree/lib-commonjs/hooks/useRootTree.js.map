{"version":3,"sources":["useRootTree.js"],"sourcesContent":["import { getNativeElementProps, useEventCallback } from '@fluentui/react-utilities';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { createOpenItems } from '../utils/createOpenItems';\nimport { createCheckedItems } from '../utils/createCheckedItems';\nimport { treeDataTypes } from '../utils/tokens';\n/**\n * Create the state required to render the root level BaseTree.\n *\n * @param props - props from this instance of BaseTree\n * @param ref - reference to root HTMLElement of BaseTree\n */ export function useRootTree(props, ref) {\n    warnIfNoProperPropsRootTree(props);\n    const { appearance ='subtle' , size ='medium' , selectionMode ='none'  } = props;\n    const openItems = React.useMemo(()=>createOpenItems(props.openItems), [\n        props.openItems\n    ]);\n    const checkedItems = React.useMemo(()=>createCheckedItems(props.checkedItems), [\n        props.checkedItems\n    ]);\n    const requestOpenChange = (data)=>{\n        var _props_onOpenChange;\n        return (_props_onOpenChange = props.onOpenChange) === null || _props_onOpenChange === void 0 ? void 0 : _props_onOpenChange.call(props, data.event, data);\n    };\n    const requestCheckedChange = (data)=>{\n        var _props_onCheckedChange;\n        return (_props_onCheckedChange = props.onCheckedChange) === null || _props_onCheckedChange === void 0 ? void 0 : _props_onCheckedChange.call(props, data.event, data);\n    };\n    const requestNavigation = (data)=>{\n        var _props_onNavigation_unstable;\n        (_props_onNavigation_unstable = props.onNavigation_unstable) === null || _props_onNavigation_unstable === void 0 ? void 0 : _props_onNavigation_unstable.call(props, data.event, data);\n        if (data.type === treeDataTypes.ArrowDown || data.type === treeDataTypes.ArrowUp) {\n            data.event.preventDefault();\n        }\n    };\n    const requestTreeResponse = useEventCallback((request)=>{\n        switch(request.type){\n            case treeDataTypes.Click:\n            case treeDataTypes.ExpandIconClick:\n                {\n                    return ReactDOM.unstable_batchedUpdates(()=>{\n                        requestOpenChange({\n                            ...request,\n                            open: request.itemType === 'branch' && !openItems.has(request.value)\n                        });\n                        requestNavigation({\n                            ...request,\n                            type: treeDataTypes.Click\n                        });\n                    });\n                }\n            case treeDataTypes.ArrowRight:\n                {\n                    if (request.itemType === 'leaf') {\n                        return;\n                    }\n                    const open = openItems.has(request.value);\n                    if (!open) {\n                        return requestOpenChange({\n                            ...request,\n                            open: true\n                        });\n                    }\n                    return requestNavigation(request);\n                }\n            case treeDataTypes.Enter:\n                {\n                    const open = openItems.has(request.value);\n                    return requestOpenChange({\n                        ...request,\n                        open: request.itemType === 'branch' && !open\n                    });\n                }\n            case treeDataTypes.ArrowLeft:\n                {\n                    const open = openItems.has(request.value);\n                    if (open && request.itemType === 'branch') {\n                        return requestOpenChange({\n                            ...request,\n                            open: false,\n                            type: treeDataTypes.ArrowLeft\n                        });\n                    }\n                    return requestNavigation({\n                        ...request,\n                        type: treeDataTypes.ArrowLeft\n                    });\n                }\n            case treeDataTypes.End:\n            case treeDataTypes.Home:\n            case treeDataTypes.ArrowUp:\n            case treeDataTypes.ArrowDown:\n            case treeDataTypes.TypeAhead:\n                return requestNavigation({\n                    ...request,\n                    target: request.event.currentTarget\n                });\n            case treeDataTypes.Change:\n                {\n                    const previousCheckedValue = checkedItems.get(request.value);\n                    return requestCheckedChange({\n                        ...request,\n                        selectionMode: selectionMode,\n                        checked: previousCheckedValue === 'mixed' ? true : !previousCheckedValue\n                    });\n                }\n        }\n    });\n    return {\n        components: {\n            root: 'div'\n        },\n        selectionMode,\n        open: true,\n        appearance,\n        size,\n        level: 1,\n        openItems,\n        checkedItems,\n        requestTreeResponse,\n        root: getNativeElementProps('div', {\n            ref,\n            role: 'baseTree',\n            'aria-multiselectable': selectionMode === 'multiselect' ? true : undefined,\n            ...props\n        })\n    };\n}\nfunction warnIfNoProperPropsRootTree(props) {\n    if (process.env.NODE_ENV === 'development') {\n        if (!props['aria-label'] && !props['aria-labelledby']) {\n            // eslint-disable-next-line no-console\n            console.warn('BaseTree must have either a `aria-label` or `aria-labelledby` property defined');\n        }\n    }\n}\n"],"names":["useRootTree","props","ref","warnIfNoProperPropsRootTree","appearance","size","selectionMode","openItems","React","useMemo","createOpenItems","checkedItems","createCheckedItems","requestOpenChange","data","_props_onOpenChange","onOpenChange","call","event","requestCheckedChange","_props_onCheckedChange","onCheckedChange","requestNavigation","_props_onNavigation_unstable","onNavigation_unstable","type","treeDataTypes","ArrowDown","ArrowUp","preventDefault","requestTreeResponse","useEventCallback","request","Click","ExpandIconClick","ReactDOM","unstable_batchedUpdates","open","itemType","has","value","ArrowRight","Enter","ArrowLeft","End","Home","TypeAhead","target","currentTarget","Change","previousCheckedValue","get","checked","components","root","level","getNativeElementProps","role","undefined","process","env","NODE_ENV","console","warn"],"mappings":"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"}
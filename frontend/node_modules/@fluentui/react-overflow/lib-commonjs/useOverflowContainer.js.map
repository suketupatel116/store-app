{"version":3,"sources":["useOverflowContainer.js"],"sourcesContent":["import * as React from 'react';\nimport { createOverflowManager } from '@fluentui/priority-overflow';\nimport { canUseDOM, useEventCallback, useIsomorphicLayoutEffect } from '@fluentui/react-utilities';\nimport { DATA_OVERFLOWING, DATA_OVERFLOW_DIVIDER, DATA_OVERFLOW_ITEM, DATA_OVERFLOW_MENU } from './constants';\n/**\n * @internal\n * @param update - Callback when overflow state changes\n * @param options - Options to configure the overflow container\n * @returns - ref to attach to an intrinsic HTML element and imperative functions\n */ export const useOverflowContainer = (update, options)=>{\n    const { overflowAxis , overflowDirection , padding , minimumVisible , onUpdateItemVisibility  } = options;\n    // DOM ref to the overflow container element\n    const containerRef = React.useRef(null);\n    const updateOverflowItems = useEventCallback(update);\n    const [overflowManager] = React.useState(()=>canUseDOM() ? createOverflowManager() : null);\n    useIsomorphicLayoutEffect(()=>{\n        if (!containerRef.current) {\n            return;\n        }\n        if (overflowManager) {\n            overflowManager.observe(containerRef.current, {\n                overflowDirection: overflowDirection !== null && overflowDirection !== void 0 ? overflowDirection : 'end',\n                overflowAxis: overflowAxis !== null && overflowAxis !== void 0 ? overflowAxis : 'horizontal',\n                padding: padding !== null && padding !== void 0 ? padding : 10,\n                minimumVisible: minimumVisible !== null && minimumVisible !== void 0 ? minimumVisible : 0,\n                onUpdateItemVisibility: onUpdateItemVisibility !== null && onUpdateItemVisibility !== void 0 ? onUpdateItemVisibility : ()=>undefined,\n                onUpdateOverflow: updateOverflowItems !== null && updateOverflowItems !== void 0 ? updateOverflowItems : ()=>undefined\n            });\n            return ()=>{\n                overflowManager.disconnect();\n            };\n        }\n    }, [\n        updateOverflowItems,\n        overflowManager,\n        overflowDirection,\n        overflowAxis,\n        padding,\n        minimumVisible,\n        onUpdateItemVisibility\n    ]);\n    const registerItem = React.useCallback((item)=>{\n        overflowManager === null || overflowManager === void 0 ? void 0 : overflowManager.addItem(item);\n        item.element.setAttribute(DATA_OVERFLOW_ITEM, '');\n        return ()=>{\n            item.element.removeAttribute(DATA_OVERFLOWING);\n            item.element.removeAttribute(DATA_OVERFLOW_ITEM);\n            overflowManager === null || overflowManager === void 0 ? void 0 : overflowManager.removeItem(item.id);\n        };\n    }, [\n        overflowManager\n    ]);\n    const registerDivider = React.useCallback((divider)=>{\n        const el = divider.element;\n        overflowManager === null || overflowManager === void 0 ? void 0 : overflowManager.addDivider(divider);\n        el && el.setAttribute(DATA_OVERFLOW_DIVIDER, '');\n        return ()=>{\n            divider.groupId && (overflowManager === null || overflowManager === void 0 ? void 0 : overflowManager.removeDivider(divider.groupId));\n            el.removeAttribute(DATA_OVERFLOW_DIVIDER);\n        };\n    }, [\n        overflowManager\n    ]);\n    const updateOverflow = React.useCallback(()=>{\n        overflowManager === null || overflowManager === void 0 ? void 0 : overflowManager.update();\n    }, [\n        overflowManager\n    ]);\n    const registerOverflowMenu = React.useCallback((el)=>{\n        overflowManager === null || overflowManager === void 0 ? void 0 : overflowManager.addOverflowMenu(el);\n        el.setAttribute(DATA_OVERFLOW_MENU, '');\n        return ()=>{\n            overflowManager === null || overflowManager === void 0 ? void 0 : overflowManager.removeOverflowMenu();\n            el.removeAttribute(DATA_OVERFLOW_MENU);\n        };\n    }, [\n        overflowManager\n    ]);\n    return {\n        containerRef,\n        registerItem,\n        updateOverflow,\n        registerOverflowMenu,\n        registerDivider\n    };\n};\nexport const updateVisibilityAttribute = ({ item , visible  })=>{\n    if (visible) {\n        item.element.removeAttribute(DATA_OVERFLOWING);\n    } else {\n        item.element.setAttribute(DATA_OVERFLOWING, '');\n    }\n};\n"],"names":["useOverflowContainer","updateVisibilityAttribute","update","options","overflowAxis","overflowDirection","padding","minimumVisible","onUpdateItemVisibility","containerRef","React","useRef","updateOverflowItems","useEventCallback","overflowManager","useState","canUseDOM","createOverflowManager","useIsomorphicLayoutEffect","current","observe","undefined","onUpdateOverflow","disconnect","registerItem","useCallback","item","addItem","element","setAttribute","DATA_OVERFLOW_ITEM","removeAttribute","DATA_OVERFLOWING","removeItem","id","registerDivider","divider","el","addDivider","DATA_OVERFLOW_DIVIDER","groupId","removeDivider","updateOverflow","registerOverflowMenu","addOverflowMenu","DATA_OVERFLOW_MENU","removeOverflowMenu","visible"],"mappings":"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"}
{"version":3,"sources":["useCardPreview.js"],"sourcesContent":["import * as React from 'react';\nimport { getNativeElementProps, resolveShorthand, useMergedRefs } from '@fluentui/react-utilities';\nimport { useCardContext_unstable } from '../Card/CardContext';\nimport { cardPreviewClassNames } from './useCardPreviewStyles.styles';\n/**\n * Create the state required to render CardPreview.\n *\n * The returned state can be modified with hooks such as useCardPreviewStyles_unstable,\n * before being passed to renderCardPreview_unstable.\n *\n * @param props - props from this instance of CardPreview\n * @param ref - reference to root HTMLElement of CardPreview\n */ export const useCardPreview_unstable = (props, ref)=>{\n    const { logo  } = props;\n    const { selectableA11yProps: { referenceLabel , referenceId , setReferenceLabel , setReferenceId  }  } = useCardContext_unstable();\n    const previewRef = useMergedRefs(ref, React.useRef(null));\n    React.useEffect(()=>{\n        if (referenceLabel && referenceId) {\n            return;\n        }\n        if (previewRef.current && previewRef.current.parentNode) {\n            const img = previewRef.current.parentNode.querySelector(`.${cardPreviewClassNames.root} > img`);\n            if (img) {\n                const ariaLabel = img.getAttribute('aria-label');\n                const ariaDescribedby = img.getAttribute('aria-describedby');\n                if (ariaDescribedby) {\n                    setReferenceId(ariaDescribedby);\n                } else if (img.alt) {\n                    setReferenceLabel(img.alt);\n                } else if (ariaLabel) {\n                    setReferenceLabel(ariaLabel);\n                }\n            }\n        }\n    }, [\n        setReferenceLabel,\n        referenceLabel,\n        previewRef,\n        referenceId,\n        setReferenceId\n    ]);\n    return {\n        components: {\n            root: 'div',\n            logo: 'div'\n        },\n        root: getNativeElementProps('div', {\n            ref: previewRef,\n            ...props\n        }),\n        logo: resolveShorthand(logo)\n    };\n};\n"],"names":["useCardPreview_unstable","props","ref","logo","selectableA11yProps","referenceLabel","referenceId","setReferenceLabel","setReferenceId","useCardContext_unstable","previewRef","useMergedRefs","React","useRef","useEffect","current","parentNode","img","querySelector","cardPreviewClassNames","root","ariaLabel","getAttribute","ariaDescribedby","alt","components","getNativeElementProps","resolveShorthand"],"mappings":";;;;+BAYiBA;;aAAAA;;;6DAZM;gCACgD;6BAC/B;4CACF;AAS3B,MAAMA,0BAA0B,CAACC,OAAOC,MAAM;IACrD,MAAM,EAAEC,KAAI,EAAG,GAAGF;IAClB,MAAM,EAAEG,qBAAqB,EAAEC,eAAc,EAAGC,YAAW,EAAGC,kBAAiB,EAAGC,eAAc,EAAG,CAAA,EAAG,GAAGC,IAAAA,oCAAuB;IAChI,MAAMC,aAAaC,IAAAA,6BAAa,EAACT,KAAKU,OAAMC,MAAM,CAAC,IAAI;IACvDD,OAAME,SAAS,CAAC,IAAI;QAChB,IAAIT,kBAAkBC,aAAa;YAC/B;QACJ,CAAC;QACD,IAAII,WAAWK,OAAO,IAAIL,WAAWK,OAAO,CAACC,UAAU,EAAE;YACrD,MAAMC,MAAMP,WAAWK,OAAO,CAACC,UAAU,CAACE,aAAa,CAAC,CAAC,CAAC,EAAEC,iDAAqB,CAACC,IAAI,CAAC,MAAM,CAAC;YAC9F,IAAIH,KAAK;gBACL,MAAMI,YAAYJ,IAAIK,YAAY,CAAC;gBACnC,MAAMC,kBAAkBN,IAAIK,YAAY,CAAC;gBACzC,IAAIC,iBAAiB;oBACjBf,eAAee;gBACnB,OAAO,IAAIN,IAAIO,GAAG,EAAE;oBAChBjB,kBAAkBU,IAAIO,GAAG;gBAC7B,OAAO,IAAIH,WAAW;oBAClBd,kBAAkBc;gBACtB,CAAC;YACL,CAAC;QACL,CAAC;IACL,GAAG;QACCd;QACAF;QACAK;QACAJ;QACAE;KACH;IACD,OAAO;QACHiB,YAAY;YACRL,MAAM;YACNjB,MAAM;QACV;QACAiB,MAAMM,IAAAA,qCAAqB,EAAC,OAAO;YAC/BxB,KAAKQ;YACL,GAAGT,KAAK;QACZ;QACAE,MAAMwB,IAAAA,gCAAgB,EAACxB;IAC3B;AACJ"}
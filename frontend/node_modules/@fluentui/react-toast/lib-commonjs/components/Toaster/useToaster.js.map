{"version":3,"sources":["useToaster.js"],"sourcesContent":["import * as React from 'react';\nimport { getNativeElementProps, isHTMLElement, resolveShorthand } from '@fluentui/react-utilities';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\nimport { TOAST_POSITIONS, useToaster } from '../../state';\nimport { ToastContainer } from '../ToastContainer';\n/**\n * Create the state required to render Toaster.\n *\n * @param props - props from this instance of Toaster\n */ export const useToaster_unstable = (props)=>{\n    const { offset , announce: announceProp , ...rest } = props;\n    const announceRef = React.useRef(()=>null);\n    const { toastsToRender , isToastVisible , pauseAllToasts , playAllToasts , tryRestoreFocus  } = useToaster(rest);\n    const announce = React.useCallback((message, options)=>announceRef.current(message, options), []);\n    const { dir  } = useFluent();\n    const rootProps = getNativeElementProps('div', rest);\n    // Adds native HTML focusin/focusout listeners\n    // https://github.com/facebook/react/issues/25194\n    const focusListenerRef = React.useCallback((el)=>{\n        if (el) {\n            el.addEventListener('focusin', (e)=>{\n                if (isHTMLElement(e.currentTarget) && !e.currentTarget.contains(isHTMLElement(e.relatedTarget) ? e.relatedTarget : null)) {\n                    pauseAllToasts();\n                }\n            });\n            el.addEventListener('focusout', (e)=>{\n                if (isHTMLElement(e.currentTarget) && !e.currentTarget.contains(isHTMLElement(e.relatedTarget) ? e.relatedTarget : null)) {\n                    playAllToasts();\n                    tryRestoreFocus();\n                }\n            });\n        }\n    }, [\n        playAllToasts,\n        pauseAllToasts,\n        tryRestoreFocus\n    ]);\n    const createPositionSlot = (toastPosition)=>{\n        var _toastsToRender_get;\n        return resolveShorthand(toastsToRender.has(toastPosition) ? rootProps : null, {\n            defaultProps: {\n                ref: focusListenerRef,\n                children: (_toastsToRender_get = toastsToRender.get(toastPosition)) === null || _toastsToRender_get === void 0 ? void 0 : _toastsToRender_get.map((toast)=>/*#__PURE__*/ React.createElement(ToastContainer, {\n                        ...toast,\n                        tryRestoreFocus: tryRestoreFocus,\n                        intent: toast.intent,\n                        announce: announce,\n                        key: toast.toastId,\n                        visible: isToastVisible(toast.toastId)\n                    }, toast.content)),\n                'data-toaster-position': toastPosition\n            }\n        });\n    };\n    return {\n        dir,\n        components: {\n            root: 'div',\n            bottomStart: 'div',\n            bottomEnd: 'div',\n            topStart: 'div',\n            topEnd: 'div'\n        },\n        root: resolveShorthand(rootProps, {\n            required: true\n        }),\n        bottomStart: createPositionSlot(TOAST_POSITIONS.bottomStart),\n        bottomEnd: createPositionSlot(TOAST_POSITIONS.bottomEnd),\n        topStart: createPositionSlot(TOAST_POSITIONS.topStart),\n        topEnd: createPositionSlot(TOAST_POSITIONS.topEnd),\n        announceRef,\n        offset,\n        announce: announceProp !== null && announceProp !== void 0 ? announceProp : announce,\n        renderAriaLive: !announceProp\n    };\n};\n"],"names":["useToaster_unstable","props","offset","announce","announceProp","rest","announceRef","React","useRef","toastsToRender","isToastVisible","pauseAllToasts","playAllToasts","tryRestoreFocus","useToaster","useCallback","message","options","current","dir","useFluent","rootProps","getNativeElementProps","focusListenerRef","el","addEventListener","e","isHTMLElement","currentTarget","contains","relatedTarget","createPositionSlot","toastPosition","_toastsToRender_get","resolveShorthand","has","defaultProps","ref","children","get","map","toast","createElement","ToastContainer","intent","key","toastId","visible","content","components","root","bottomStart","bottomEnd","topStart","topEnd","required","TOAST_POSITIONS","renderAriaLive"],"mappings":";;;;+BASiBA;;aAAAA;;;6DATM;gCACgD;qCACvB;uBACJ;gCACb;AAKpB,MAAMA,sBAAsB,CAACC,QAAQ;IAC5C,MAAM,EAAEC,OAAM,EAAGC,UAAUC,aAAY,EAAG,GAAGC,MAAM,GAAGJ;IACtD,MAAMK,cAAcC,OAAMC,MAAM,CAAC,IAAI,IAAI;IACzC,MAAM,EAAEC,eAAc,EAAGC,eAAc,EAAGC,eAAc,EAAGC,cAAa,EAAGC,gBAAe,EAAG,GAAGC,IAAAA,iBAAU,EAACT;IAC3G,MAAMF,WAAWI,OAAMQ,WAAW,CAAC,CAACC,SAASC,UAAUX,YAAYY,OAAO,CAACF,SAASC,UAAU,EAAE;IAChG,MAAM,EAAEE,IAAG,EAAG,GAAGC,IAAAA,uCAAS;IAC1B,MAAMC,YAAYC,IAAAA,qCAAqB,EAAC,OAAOjB;IAC/C,8CAA8C;IAC9C,iDAAiD;IACjD,MAAMkB,mBAAmBhB,OAAMQ,WAAW,CAAC,CAACS,KAAK;QAC7C,IAAIA,IAAI;YACJA,GAAGC,gBAAgB,CAAC,WAAW,CAACC,IAAI;gBAChC,IAAIC,IAAAA,6BAAa,EAACD,EAAEE,aAAa,KAAK,CAACF,EAAEE,aAAa,CAACC,QAAQ,CAACF,IAAAA,6BAAa,EAACD,EAAEI,aAAa,IAAIJ,EAAEI,aAAa,GAAG,IAAI,GAAG;oBACtHnB;gBACJ,CAAC;YACL;YACAa,GAAGC,gBAAgB,CAAC,YAAY,CAACC,IAAI;gBACjC,IAAIC,IAAAA,6BAAa,EAACD,EAAEE,aAAa,KAAK,CAACF,EAAEE,aAAa,CAACC,QAAQ,CAACF,IAAAA,6BAAa,EAACD,EAAEI,aAAa,IAAIJ,EAAEI,aAAa,GAAG,IAAI,GAAG;oBACtHlB;oBACAC;gBACJ,CAAC;YACL;QACJ,CAAC;IACL,GAAG;QACCD;QACAD;QACAE;KACH;IACD,MAAMkB,qBAAqB,CAACC,gBAAgB;QACxC,IAAIC;QACJ,OAAOC,IAAAA,gCAAgB,EAACzB,eAAe0B,GAAG,CAACH,iBAAiBX,YAAY,IAAI,EAAE;YAC1Ee,cAAc;gBACVC,KAAKd;gBACLe,UAAU,AAACL,CAAAA,sBAAsBxB,eAAe8B,GAAG,CAACP,cAAa,MAAO,IAAI,IAAIC,wBAAwB,KAAK,IAAI,KAAK,IAAIA,oBAAoBO,GAAG,CAAC,CAACC,QAAQ,WAAW,GAAGlC,OAAMmC,aAAa,CAACC,8BAAc,EAAE;wBACrM,GAAGF,KAAK;wBACR5B,iBAAiBA;wBACjB+B,QAAQH,MAAMG,MAAM;wBACpBzC,UAAUA;wBACV0C,KAAKJ,MAAMK,OAAO;wBAClBC,SAASrC,eAAe+B,MAAMK,OAAO;oBACzC,GAAGL,MAAMO,OAAO,EAAE;gBACtB,yBAAyBhB;YAC7B;QACJ;IACJ;IACA,OAAO;QACHb;QACA8B,YAAY;YACRC,MAAM;YACNC,aAAa;YACbC,WAAW;YACXC,UAAU;YACVC,QAAQ;QACZ;QACAJ,MAAMhB,IAAAA,gCAAgB,EAACb,WAAW;YAC9BkC,UAAU,IAAI;QAClB;QACAJ,aAAapB,mBAAmByB,sBAAe,CAACL,WAAW;QAC3DC,WAAWrB,mBAAmByB,sBAAe,CAACJ,SAAS;QACvDC,UAAUtB,mBAAmByB,sBAAe,CAACH,QAAQ;QACrDC,QAAQvB,mBAAmByB,sBAAe,CAACF,MAAM;QACjDhD;QACAJ;QACAC,UAAUC,iBAAiB,IAAI,IAAIA,iBAAiB,KAAK,IAAIA,eAAeD,QAAQ;QACpFsD,gBAAgB,CAACrD;IACrB;AACJ"}
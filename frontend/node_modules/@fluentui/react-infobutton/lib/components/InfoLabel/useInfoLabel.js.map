{"version":3,"sources":["useInfoLabel.ts"],"sourcesContent":["import * as React from 'react';\n\nimport { Label } from '@fluentui/react-label';\nimport { mergeCallbacks, resolveShorthand, useEventCallback, useId } from '@fluentui/react-utilities';\nimport { InfoButton } from '../InfoButton/InfoButton';\nimport type { InfoLabelProps, InfoLabelState } from './InfoLabel.types';\n\n/**\n * Create the state required to render InfoLabel.\n *\n * The returned state can be modified with hooks such as useInfoLabelStyles_unstable,\n * before being passed to renderInfoLabel_unstable.\n *\n * @param props - props from this instance of InfoLabel\n * @param ref - reference to label element of InfoLabel\n */\nexport const useInfoLabel_unstable = (props: InfoLabelProps, ref: React.Ref<HTMLLabelElement>): InfoLabelState => {\n  const {\n    root: rootShorthand,\n    label: labelShorthand,\n    infoButton: infoButtonShorthand,\n    info,\n    size,\n    className,\n    style,\n    ...labelProps\n  } = props;\n  const baseId = useId('infolabel-');\n  const [open, setOpen] = React.useState(false);\n\n  const root = resolveShorthand(rootShorthand, {\n    required: true,\n    defaultProps: {\n      className,\n      style,\n    },\n  });\n\n  const label = resolveShorthand(labelShorthand, {\n    required: true,\n    defaultProps: {\n      id: baseId + '__label',\n      ref,\n      size,\n      ...labelProps,\n    },\n  });\n\n  const infoButton = resolveShorthand(infoButtonShorthand, {\n    required: !!info,\n    defaultProps: {\n      id: baseId + '__infoButton',\n      size,\n      info,\n    },\n  });\n\n  const infoButtonPopover = resolveShorthand(infoButton?.popover, { required: true });\n  infoButtonPopover.onOpenChange = useEventCallback(\n    mergeCallbacks(infoButtonPopover.onOpenChange, (e, data) => {\n      setOpen(data.open);\n    }),\n  );\n\n  if (infoButton) {\n    infoButton.popover = infoButtonPopover;\n    infoButton.info = resolveShorthand(infoButton?.info, {\n      defaultProps: {\n        id: baseId + '__info',\n      },\n    });\n\n    infoButton['aria-labelledby'] ??= `${label.id} ${infoButton.id}`;\n\n    if (open) {\n      root['aria-owns'] ??= infoButton.info?.id;\n    }\n  }\n\n  return {\n    size,\n    components: {\n      root: 'span',\n      label: Label,\n      infoButton: InfoButton,\n    },\n    root,\n    label,\n    infoButton,\n  };\n};\n"],"names":["infoButton","root","React","Label","mergeCallbacks","resolveShorthand","useEventCallback","useId","InfoButton","useInfoLabel_unstable","props","ref","rootShorthand","label","labelShorthand","infoButtonShorthand","info","size","className","style","labelProps","baseId","open","setOpen","useState","required","defaultProps","id","infoButtonPopover","popover","onOpenChange","e","data","components"],"mappings":"IAwEIA,aAAW,iBAGTC,OAAK;AA3EX,YAAYC,WAAW,QAAQ;AAE/B,SAASC,KAAK,QAAQ,wBAAwB;AAC9C,SAASC,cAAc,EAAEC,gBAAgB,EAAEC,gBAAgB,EAAEC,KAAK,QAAQ,4BAA4B;AACtG,SAASC,UAAU,QAAQ,2BAA2B;AAGtD;;;;;;;;CAQC,GACD,OAAO,MAAMC,wBAAwB,CAACC,OAAuBC,MAAqD;IAChH,MAAM,EACJV,MAAMW,cAAa,EACnBC,OAAOC,eAAc,EACrBd,YAAYe,oBAAmB,EAC/BC,KAAI,EACJC,KAAI,EACJC,UAAS,EACTC,MAAK,EACL,GAAGC,YACJ,GAAGV;IACJ,MAAMW,SAASd,MAAM;IACrB,MAAM,CAACe,MAAMC,QAAQ,GAAGrB,MAAMsB,QAAQ,CAAC,KAAK;IAE5C,MAAMvB,OAAOI,iBAAiBO,eAAe;QAC3Ca,UAAU,IAAI;QACdC,cAAc;YACZR;YACAC;QACF;IACF;IAEA,MAAMN,QAAQR,iBAAiBS,gBAAgB;QAC7CW,UAAU,IAAI;QACdC,cAAc;YACZC,IAAIN,SAAS;YACbV;YACAM;YACA,GAAGG,UAAU;QACf;IACF;IAEA,MAAMpB,aAAaK,iBAAiBU,qBAAqB;QACvDU,UAAU,CAAC,CAACT;QACZU,cAAc;YACZC,IAAIN,SAAS;YACbJ;YACAD;QACF;IACF;IAEA,MAAMY,oBAAoBvB,iBAAiBL,uBAAAA,wBAAAA,KAAAA,IAAAA,WAAY6B,OAAO,EAAE;QAAEJ,UAAU,IAAI;IAAC;IACjFG,kBAAkBE,YAAY,GAAGxB,iBAC/BF,eAAewB,kBAAkBE,YAAY,EAAE,CAACC,GAAGC,OAAS;QAC1DT,QAAQS,KAAKV,IAAI;IACnB;IAGF,IAAItB,YAAY;QACdA,WAAW6B,OAAO,GAAGD;QACrB5B,WAAWgB,IAAI,GAAGX,iBAAiBL,uBAAAA,wBAAAA,KAAAA,IAAAA,WAAYgB,IAAI,EAAE;YACnDU,cAAc;gBACZC,IAAIN,SAAS;YACf;QACF;;QAEArB,MAAAA,cAAAA,WAAU,CAAC,kBAAA,kBAAkB,iCAA7BA,WAAU,CAAC,gBAAkB,GAAK,CAAC,EAAEa,MAAMc,EAAE,CAAC,CAAC,EAAE3B,WAAW2B,EAAE,CAAC,CAAC;QAEhE,IAAIL,MAAM;gBACctB;;YAAtBC,OAAAA,QAAAA,KAAI,CAAC,YAAA,YAAY,mCAAjBA,KAAI,CAAC,UAAY,GAAKD,CAAAA,mBAAAA,WAAWgB,IAAI,cAAfhB,8BAAAA,KAAAA,IAAAA,iBAAiB2B,EAAE;QAC3C,CAAC;IACH,CAAC;IAED,OAAO;QACLV;QACAgB,YAAY;YACVhC,MAAM;YACNY,OAAOV;YACPH,YAAYQ;QACd;QACAP;QACAY;QACAb;IACF;AACF,EAAE"}
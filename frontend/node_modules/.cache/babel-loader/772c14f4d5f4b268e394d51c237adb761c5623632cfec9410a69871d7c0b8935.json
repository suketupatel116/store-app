{"ast":null,"code":"import * as React from 'react';\nimport { resolveShorthand, createPriorityQueue, useEventCallback } from '@fluentui/react-utilities';\n/** The duration the message needs to be in present in DOM for screen readers to register a change and announce */\nconst MESSAGE_DURATION = 500;\n/**\n * Create the state required to render AriaLive.\n *\n * The returned state can be modified with hooks such as useAriaLiveStyles_unstable,\n * before being passed to renderAriaLive_unstable.\n *\n * @param props - props from this instance of AriaLive\n */\nexport const useAriaLive_unstable = props => {\n  const [currentMessage, setCurrentMessage] = React.useState(undefined);\n  // Can't rely on Date.now() if user invokes announce more than once in a code block\n  const order = React.useRef(0);\n  const [messageQueue] = React.useState(() => createPriorityQueue((a, b) => {\n    if (a.politeness === b.politeness) {\n      return a.createdAt - b.createdAt;\n    }\n    return a.politeness === 'assertive' ? -1 : 1;\n  }));\n  const announce = useEventCallback((message, options) => {\n    const {\n      politeness\n    } = options;\n    if (message === (currentMessage === null || currentMessage === void 0 ? void 0 : currentMessage.message)) {\n      return;\n    }\n    const liveMessage = {\n      message,\n      politeness,\n      createdAt: order.current++\n    };\n    if (!currentMessage) {\n      setCurrentMessage(liveMessage);\n    } else {\n      messageQueue.enqueue(liveMessage);\n    }\n  });\n  React.useEffect(() => {\n    const timeout = setTimeout(() => {\n      if (messageQueue.peek()) {\n        setCurrentMessage(messageQueue.dequeue());\n      } else {\n        setCurrentMessage(undefined);\n      }\n    }, MESSAGE_DURATION);\n    return () => clearTimeout(timeout);\n  }, [currentMessage, messageQueue]);\n  React.useImperativeHandle(props.announceRef, () => announce);\n  const politeMessage = (currentMessage === null || currentMessage === void 0 ? void 0 : currentMessage.politeness) === 'polite' ? currentMessage.message : undefined;\n  const assertiveMessage = (currentMessage === null || currentMessage === void 0 ? void 0 : currentMessage.politeness) === 'assertive' ? currentMessage.message : undefined;\n  return {\n    components: {\n      assertive: 'div',\n      polite: 'div'\n    },\n    assertive: resolveShorthand(props.assertive, {\n      required: true,\n      defaultProps: {\n        'aria-live': 'assertive',\n        children: assertiveMessage\n      }\n    }),\n    polite: resolveShorthand(props.polite, {\n      required: true,\n      defaultProps: {\n        'aria-live': 'polite',\n        children: politeMessage\n      }\n    })\n  };\n};","map":{"version":3,"names":["React","resolveShorthand","createPriorityQueue","useEventCallback","MESSAGE_DURATION","useAriaLive_unstable","props","currentMessage","setCurrentMessage","useState","undefined","order","useRef","messageQueue","a","b","politeness","createdAt","announce","message","options","liveMessage","current","enqueue","useEffect","timeout","setTimeout","peek","dequeue","clearTimeout","useImperativeHandle","announceRef","politeMessage","assertiveMessage","components","assertive","polite","required","defaultProps","children"],"sources":["/Users/suketupatel/Desktop/application/frontend/node_modules/@fluentui/react-toast/lib/components/AriaLive/useAriaLive.js"],"sourcesContent":["import * as React from 'react';\nimport { resolveShorthand, createPriorityQueue, useEventCallback } from '@fluentui/react-utilities';\n/** The duration the message needs to be in present in DOM for screen readers to register a change and announce */ const MESSAGE_DURATION = 500;\n/**\n * Create the state required to render AriaLive.\n *\n * The returned state can be modified with hooks such as useAriaLiveStyles_unstable,\n * before being passed to renderAriaLive_unstable.\n *\n * @param props - props from this instance of AriaLive\n */ export const useAriaLive_unstable = (props)=>{\n    const [currentMessage, setCurrentMessage] = React.useState(undefined);\n    // Can't rely on Date.now() if user invokes announce more than once in a code block\n    const order = React.useRef(0);\n    const [messageQueue] = React.useState(()=>createPriorityQueue((a, b)=>{\n            if (a.politeness === b.politeness) {\n                return a.createdAt - b.createdAt;\n            }\n            return a.politeness === 'assertive' ? -1 : 1;\n        }));\n    const announce = useEventCallback((message, options)=>{\n        const { politeness  } = options;\n        if (message === (currentMessage === null || currentMessage === void 0 ? void 0 : currentMessage.message)) {\n            return;\n        }\n        const liveMessage = {\n            message,\n            politeness,\n            createdAt: order.current++\n        };\n        if (!currentMessage) {\n            setCurrentMessage(liveMessage);\n        } else {\n            messageQueue.enqueue(liveMessage);\n        }\n    });\n    React.useEffect(()=>{\n        const timeout = setTimeout(()=>{\n            if (messageQueue.peek()) {\n                setCurrentMessage(messageQueue.dequeue());\n            } else {\n                setCurrentMessage(undefined);\n            }\n        }, MESSAGE_DURATION);\n        return ()=>clearTimeout(timeout);\n    }, [\n        currentMessage,\n        messageQueue\n    ]);\n    React.useImperativeHandle(props.announceRef, ()=>announce);\n    const politeMessage = (currentMessage === null || currentMessage === void 0 ? void 0 : currentMessage.politeness) === 'polite' ? currentMessage.message : undefined;\n    const assertiveMessage = (currentMessage === null || currentMessage === void 0 ? void 0 : currentMessage.politeness) === 'assertive' ? currentMessage.message : undefined;\n    return {\n        components: {\n            assertive: 'div',\n            polite: 'div'\n        },\n        assertive: resolveShorthand(props.assertive, {\n            required: true,\n            defaultProps: {\n                'aria-live': 'assertive',\n                children: assertiveMessage\n            }\n        }),\n        polite: resolveShorthand(props.polite, {\n            required: true,\n            defaultProps: {\n                'aria-live': 'polite',\n                children: politeMessage\n            }\n        })\n    };\n};\n"],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,gBAAgB,EAAEC,mBAAmB,EAAEC,gBAAgB,QAAQ,2BAA2B;AACnG;AAAmH,MAAMC,gBAAgB,GAAG,GAAG;AAC/I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAI,OAAO,MAAMC,oBAAoB,GAAIC,KAAK,IAAG;EAC7C,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGR,KAAK,CAACS,QAAQ,CAACC,SAAS,CAAC;EACrE;EACA,MAAMC,KAAK,GAAGX,KAAK,CAACY,MAAM,CAAC,CAAC,CAAC;EAC7B,MAAM,CAACC,YAAY,CAAC,GAAGb,KAAK,CAACS,QAAQ,CAAC,MAAIP,mBAAmB,CAAC,CAACY,CAAC,EAAEC,CAAC,KAAG;IAC9D,IAAID,CAAC,CAACE,UAAU,KAAKD,CAAC,CAACC,UAAU,EAAE;MAC/B,OAAOF,CAAC,CAACG,SAAS,GAAGF,CAAC,CAACE,SAAS;IACpC;IACA,OAAOH,CAAC,CAACE,UAAU,KAAK,WAAW,GAAG,CAAC,CAAC,GAAG,CAAC;EAChD,CAAC,CAAC,CAAC;EACP,MAAME,QAAQ,GAAGf,gBAAgB,CAAC,CAACgB,OAAO,EAAEC,OAAO,KAAG;IAClD,MAAM;MAAEJ;IAAY,CAAC,GAAGI,OAAO;IAC/B,IAAID,OAAO,MAAMZ,cAAc,KAAK,IAAI,IAAIA,cAAc,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,cAAc,CAACY,OAAO,CAAC,EAAE;MACtG;IACJ;IACA,MAAME,WAAW,GAAG;MAChBF,OAAO;MACPH,UAAU;MACVC,SAAS,EAAEN,KAAK,CAACW,OAAO;IAC5B,CAAC;IACD,IAAI,CAACf,cAAc,EAAE;MACjBC,iBAAiB,CAACa,WAAW,CAAC;IAClC,CAAC,MAAM;MACHR,YAAY,CAACU,OAAO,CAACF,WAAW,CAAC;IACrC;EACJ,CAAC,CAAC;EACFrB,KAAK,CAACwB,SAAS,CAAC,MAAI;IAChB,MAAMC,OAAO,GAAGC,UAAU,CAAC,MAAI;MAC3B,IAAIb,YAAY,CAACc,IAAI,CAAC,CAAC,EAAE;QACrBnB,iBAAiB,CAACK,YAAY,CAACe,OAAO,CAAC,CAAC,CAAC;MAC7C,CAAC,MAAM;QACHpB,iBAAiB,CAACE,SAAS,CAAC;MAChC;IACJ,CAAC,EAAEN,gBAAgB,CAAC;IACpB,OAAO,MAAIyB,YAAY,CAACJ,OAAO,CAAC;EACpC,CAAC,EAAE,CACClB,cAAc,EACdM,YAAY,CACf,CAAC;EACFb,KAAK,CAAC8B,mBAAmB,CAACxB,KAAK,CAACyB,WAAW,EAAE,MAAIb,QAAQ,CAAC;EAC1D,MAAMc,aAAa,GAAG,CAACzB,cAAc,KAAK,IAAI,IAAIA,cAAc,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,cAAc,CAACS,UAAU,MAAM,QAAQ,GAAGT,cAAc,CAACY,OAAO,GAAGT,SAAS;EACnK,MAAMuB,gBAAgB,GAAG,CAAC1B,cAAc,KAAK,IAAI,IAAIA,cAAc,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,cAAc,CAACS,UAAU,MAAM,WAAW,GAAGT,cAAc,CAACY,OAAO,GAAGT,SAAS;EACzK,OAAO;IACHwB,UAAU,EAAE;MACRC,SAAS,EAAE,KAAK;MAChBC,MAAM,EAAE;IACZ,CAAC;IACDD,SAAS,EAAElC,gBAAgB,CAACK,KAAK,CAAC6B,SAAS,EAAE;MACzCE,QAAQ,EAAE,IAAI;MACdC,YAAY,EAAE;QACV,WAAW,EAAE,WAAW;QACxBC,QAAQ,EAAEN;MACd;IACJ,CAAC,CAAC;IACFG,MAAM,EAAEnC,gBAAgB,CAACK,KAAK,CAAC8B,MAAM,EAAE;MACnCC,QAAQ,EAAE,IAAI;MACdC,YAAY,EAAE;QACV,WAAW,EAAE,QAAQ;QACrBC,QAAQ,EAAEP;MACd;IACJ,CAAC;EACL,CAAC;AACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}
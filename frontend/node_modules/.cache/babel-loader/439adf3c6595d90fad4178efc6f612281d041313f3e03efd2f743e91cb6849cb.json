{"ast":null,"code":"// src/useIsStrictMode.ts\nimport * as React from \"react\";\nvar getCurrentOwner = () => React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner.current;\nvar REACT_STRICT_MODE_TYPE = /* @__PURE__ */Symbol.for(\"react.strict_mode\");\nvar useIsStrictMode = () => {\n  if (process.env.NODE_ENV === \"production\") {\n    return false;\n  }\n  const isStrictMode = React.useRef(void 0);\n  const reactMajorVersion = React.useMemo(() => {\n    return Number(React.version.split(\".\")[0]);\n  }, [React.version]);\n  if (isNaN(reactMajorVersion) || reactMajorVersion < 18) {\n    return false;\n  }\n  if (isStrictMode.current === void 0) {\n    let currentOwner = getCurrentOwner();\n    while (currentOwner.return) {\n      currentOwner = currentOwner.return;\n      if (currentOwner.type === REACT_STRICT_MODE_TYPE || currentOwner.elementType === REACT_STRICT_MODE_TYPE) {\n        isStrictMode.current = true;\n      }\n    }\n  }\n  return !!isStrictMode.current;\n};\n\n// src/useDisposable.ts\nimport * as React4 from \"react\";\n\n// src/useStrictEffect.ts\nimport * as React2 from \"react\";\nvar effectSet = /* @__PURE__ */new WeakSet();\nfunction useStrictEffect(effect, deps) {\n  const currentOwner = getCurrentOwner();\n  React2.useEffect(() => {\n    if (!effectSet.has(currentOwner)) {\n      effectSet.add(currentOwner);\n      effect();\n      return;\n    }\n    const dispose = effect();\n    return dispose;\n  }, deps);\n}\n\n// src/useStrictMemo.ts\nimport * as React3 from \"react\";\nvar memoSet = /* @__PURE__ */new WeakSet();\nfunction useStrictMemo(factory, deps) {\n  return React3.useMemo(() => {\n    const currentOwner = getCurrentOwner();\n    if (!memoSet.has(currentOwner)) {\n      memoSet.add(currentOwner);\n      return null;\n    }\n    return factory();\n  }, deps);\n}\n\n// src/useDisposable.ts\nfunction useDisposable(factory, deps) {\n  var _a;\n  const isStrictMode = useIsStrictMode() && process.env.NODE_ENV !== \"production\";\n  const useMemo4 = isStrictMode ? useStrictMemo : React4.useMemo;\n  const useEffect3 = isStrictMode ? useStrictEffect : React4.useEffect;\n  const [disposable, dispose] = (_a = useMemo4(() => factory(), deps)) != null ? _a : [null, () => null];\n  useEffect3(() => {\n    return dispose;\n  }, deps);\n  return disposable;\n}\nexport { useDisposable, useIsStrictMode };","map":{"version":3,"names":["React","getCurrentOwner","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","current","REACT_STRICT_MODE_TYPE","Symbol","for","useIsStrictMode","process","env","NODE_ENV","isStrictMode","useRef","reactMajorVersion","useMemo","Number","version","split","isNaN","currentOwner","return","type","elementType","React4","React2","effectSet","WeakSet","useStrictEffect","effect","deps","useEffect","has","add","dispose","React3","memoSet","useStrictMemo","factory","useDisposable","_a","useMemo4","useEffect3","disposable"],"sources":["/Users/suketupatel/Desktop/application/frontend/node_modules/use-disposable/src/useIsStrictMode.ts","/Users/suketupatel/Desktop/application/frontend/node_modules/use-disposable/src/useDisposable.ts","/Users/suketupatel/Desktop/application/frontend/node_modules/use-disposable/src/useStrictEffect.ts","/Users/suketupatel/Desktop/application/frontend/node_modules/use-disposable/src/useStrictMemo.ts"],"sourcesContent":["import * as React from \"react\";\n\n/**\n * @returns Current react fiber being rendered\n */\nexport const getCurrentOwner = () =>\n  // @ts-ignore - using react internals\n  React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner\n    .current;\n\nconst REACT_STRICT_MODE_TYPE = /*#__PURE__*/ Symbol.for(\"react.strict_mode\");\n\n/**\n * Traverses up the React fiber tree to find the StrictMode component.\n * Note: This only detects strict mode from React >= 18\n * https://github.com/reactwg/react-18/discussions/19\n * @returns If strict mode is being used in the React tree\n */\nexport const useIsStrictMode = (): boolean => {\n  // This check violates Rules of Hooks, but \"process.env.NODE_ENV\" does not change in bundle\n  // or during application lifecycle\n  if (process.env.NODE_ENV === \"production\") {\n    return false;\n  }\n\n  const isStrictMode = React.useRef<boolean | undefined>(undefined);\n  const reactMajorVersion = React.useMemo(() => {\n    return Number(React.version.split(\".\")[0]);\n  }, [React.version]);\n\n  if (isNaN(reactMajorVersion) || reactMajorVersion < 18) {\n    return false;\n  }\n\n  if (isStrictMode.current === undefined) {\n    let currentOwner = getCurrentOwner();\n    while (currentOwner.return) {\n      currentOwner = currentOwner.return;\n      if (\n        currentOwner.type === REACT_STRICT_MODE_TYPE ||\n        currentOwner.elementType === REACT_STRICT_MODE_TYPE\n      ) {\n        isStrictMode.current = true;\n      }\n    }\n  }\n\n  return !!isStrictMode.current;\n};\n","import * as React from \"react\";\nimport type { DisposableFactory } from \"./types\";\nimport { useIsStrictMode } from \"./useIsStrictMode\";\nimport { useStrictEffect } from \"./useStrictEffect\";\nimport { useStrictMemo } from \"./useStrictMemo\";\n\n/**\n * Creates a disposable instance during **render time** that will\n * be created once (based on dependency array) even during strict mode.\n * The disposable will be disposed based on the dependency array similar to\n * useEffect.\n *\n * ⚠️ This can only be called **once** per component\n * @param factory - factory for disposable and its dispose function\n * @param deps - Similar to a React dependency array\n * @returns - The disposable instance\n */\nexport function useDisposable<TInstance>(\n  factory: DisposableFactory<TInstance>,\n  deps: any[]\n) {\n  // In production, strict mode does not require special handling\n  const isStrictMode =\n    useIsStrictMode() && process.env.NODE_ENV !== \"production\";\n\n  const useMemo = isStrictMode ? useStrictMemo : React.useMemo;\n  const useEffect = isStrictMode ? useStrictEffect : React.useEffect;\n\n  const [disposable, dispose] = useMemo(() => factory(), deps) ?? [\n    null,\n    () => null,\n  ];\n  useEffect(() => {\n    return dispose;\n  }, deps);\n\n  return disposable;\n}\n","import * as React from \"react\";\nimport { getCurrentOwner } from \"./useIsStrictMode\";\n\n// we know strict mode will render useMemo facory twice\n// keep a weak set to detect when the second render happens\nconst effectSet = new WeakSet();\n\nexport function useStrictEffect(\n  effect: () => () => void,\n  deps: React.DependencyList | undefined\n) {\n  const currentOwner = getCurrentOwner();\n  React.useEffect(() => {\n    if (!effectSet.has(currentOwner)) {\n      effectSet.add(currentOwner);\n      effect();\n      return;\n    }\n\n    const dispose = effect();\n    return dispose;\n  }, deps);\n}\n","import * as React from \"react\";\nimport { getCurrentOwner } from \"./useIsStrictMode\";\n\n// we know strict mode will render useMemo facory twice\n// keep a weak set to detect when the second render happens\nconst memoSet = new WeakSet();\n\nexport function useStrictMemo<TMemoized>(\n  factory: () => any,\n  deps: React.DependencyList | undefined\n): TMemoized | null {\n  return React.useMemo(() => {\n    const currentOwner = getCurrentOwner();\n    if (!memoSet.has(currentOwner)) {\n      memoSet.add(currentOwner);\n      return null;\n    }\n\n    return factory();\n  }, deps);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
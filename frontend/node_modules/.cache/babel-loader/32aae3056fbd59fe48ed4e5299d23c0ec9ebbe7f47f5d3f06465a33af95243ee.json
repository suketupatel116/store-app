{"ast":null,"code":"import { KEYBORG_FOCUSIN, createKeyborg, disposeKeyborg } from 'keyborg';\nimport { FOCUS_WITHIN_ATTR } from './constants';\n/**\n * A ponyfill that allows `:focus-within` to support visibility based on keyboard/mouse navigation\n * like `:focus-visible` https://github.com/WICG/focus-visible/issues/151\n * @returns ref to the element that uses `:focus-within` styles\n */\nexport function applyFocusWithinPolyfill(element, win) {\n  const keyborg = createKeyborg(win);\n  // When navigation mode changes to mouse, remove the focus-within selector\n  keyborg.subscribe(isNavigatingWithKeyboard => {\n    if (!isNavigatingWithKeyboard) {\n      removeFocusWithinClass(element);\n    }\n  });\n  // Keyborg's focusin event is delegated so it's only registered once on the window\n  // and contains metadata about the focus event\n  const keyborgListener = e => {\n    if (keyborg.isNavigatingWithKeyboard() && isHTMLElement(e.target)) {\n      // Griffel can't create chained global styles so use the parent element for now\n      applyFocusWithinClass(element);\n    }\n  };\n  // Make sure that when focus leaves the scope, the focus within class is removed\n  const blurListener = e => {\n    if (!e.relatedTarget || isHTMLElement(e.relatedTarget) && !element.contains(e.relatedTarget)) {\n      removeFocusWithinClass(element);\n    }\n  };\n  element.addEventListener(KEYBORG_FOCUSIN, keyborgListener);\n  element.addEventListener('focusout', blurListener);\n  // Return disposer\n  return () => {\n    element.removeEventListener(KEYBORG_FOCUSIN, keyborgListener);\n    element.removeEventListener('focusout', blurListener);\n    disposeKeyborg(keyborg);\n  };\n}\nfunction applyFocusWithinClass(el) {\n  el.setAttribute(FOCUS_WITHIN_ATTR, '');\n}\nfunction removeFocusWithinClass(el) {\n  el.removeAttribute(FOCUS_WITHIN_ATTR);\n}\nfunction isHTMLElement(target) {\n  if (!target) {\n    return false;\n  }\n  return Boolean(target && typeof target === 'object' && 'classList' in target && 'contains' in target);\n}","map":{"version":3,"names":["KEYBORG_FOCUSIN","createKeyborg","disposeKeyborg","FOCUS_WITHIN_ATTR","applyFocusWithinPolyfill","element","win","keyborg","subscribe","isNavigatingWithKeyboard","removeFocusWithinClass","keyborgListener","e","isHTMLElement","target","applyFocusWithinClass","blurListener","relatedTarget","contains","addEventListener","removeEventListener","el","setAttribute","removeAttribute","Boolean"],"sources":["/Users/suketupatel/Desktop/application/frontend/node_modules/@fluentui/react-tabster/lib/focus/focusWithinPolyfill.js"],"sourcesContent":["import { KEYBORG_FOCUSIN, createKeyborg, disposeKeyborg } from 'keyborg';\nimport { FOCUS_WITHIN_ATTR } from './constants';\n/**\n * A ponyfill that allows `:focus-within` to support visibility based on keyboard/mouse navigation\n * like `:focus-visible` https://github.com/WICG/focus-visible/issues/151\n * @returns ref to the element that uses `:focus-within` styles\n */ export function applyFocusWithinPolyfill(element, win) {\n    const keyborg = createKeyborg(win);\n    // When navigation mode changes to mouse, remove the focus-within selector\n    keyborg.subscribe((isNavigatingWithKeyboard)=>{\n        if (!isNavigatingWithKeyboard) {\n            removeFocusWithinClass(element);\n        }\n    });\n    // Keyborg's focusin event is delegated so it's only registered once on the window\n    // and contains metadata about the focus event\n    const keyborgListener = (e)=>{\n        if (keyborg.isNavigatingWithKeyboard() && isHTMLElement(e.target)) {\n            // Griffel can't create chained global styles so use the parent element for now\n            applyFocusWithinClass(element);\n        }\n    };\n    // Make sure that when focus leaves the scope, the focus within class is removed\n    const blurListener = (e)=>{\n        if (!e.relatedTarget || isHTMLElement(e.relatedTarget) && !element.contains(e.relatedTarget)) {\n            removeFocusWithinClass(element);\n        }\n    };\n    element.addEventListener(KEYBORG_FOCUSIN, keyborgListener);\n    element.addEventListener('focusout', blurListener);\n    // Return disposer\n    return ()=>{\n        element.removeEventListener(KEYBORG_FOCUSIN, keyborgListener);\n        element.removeEventListener('focusout', blurListener);\n        disposeKeyborg(keyborg);\n    };\n}\nfunction applyFocusWithinClass(el) {\n    el.setAttribute(FOCUS_WITHIN_ATTR, '');\n}\nfunction removeFocusWithinClass(el) {\n    el.removeAttribute(FOCUS_WITHIN_ATTR);\n}\nfunction isHTMLElement(target) {\n    if (!target) {\n        return false;\n    }\n    return Boolean(target && typeof target === 'object' && 'classList' in target && 'contains' in target);\n}\n"],"mappings":"AAAA,SAASA,eAAe,EAAEC,aAAa,EAAEC,cAAc,QAAQ,SAAS;AACxE,SAASC,iBAAiB,QAAQ,aAAa;AAC/C;AACA;AACA;AACA;AACA;AAAI,OAAO,SAASC,wBAAwBA,CAACC,OAAO,EAAEC,GAAG,EAAE;EACvD,MAAMC,OAAO,GAAGN,aAAa,CAACK,GAAG,CAAC;EAClC;EACAC,OAAO,CAACC,SAAS,CAAEC,wBAAwB,IAAG;IAC1C,IAAI,CAACA,wBAAwB,EAAE;MAC3BC,sBAAsB,CAACL,OAAO,CAAC;IACnC;EACJ,CAAC,CAAC;EACF;EACA;EACA,MAAMM,eAAe,GAAIC,CAAC,IAAG;IACzB,IAAIL,OAAO,CAACE,wBAAwB,CAAC,CAAC,IAAII,aAAa,CAACD,CAAC,CAACE,MAAM,CAAC,EAAE;MAC/D;MACAC,qBAAqB,CAACV,OAAO,CAAC;IAClC;EACJ,CAAC;EACD;EACA,MAAMW,YAAY,GAAIJ,CAAC,IAAG;IACtB,IAAI,CAACA,CAAC,CAACK,aAAa,IAAIJ,aAAa,CAACD,CAAC,CAACK,aAAa,CAAC,IAAI,CAACZ,OAAO,CAACa,QAAQ,CAACN,CAAC,CAACK,aAAa,CAAC,EAAE;MAC1FP,sBAAsB,CAACL,OAAO,CAAC;IACnC;EACJ,CAAC;EACDA,OAAO,CAACc,gBAAgB,CAACnB,eAAe,EAAEW,eAAe,CAAC;EAC1DN,OAAO,CAACc,gBAAgB,CAAC,UAAU,EAAEH,YAAY,CAAC;EAClD;EACA,OAAO,MAAI;IACPX,OAAO,CAACe,mBAAmB,CAACpB,eAAe,EAAEW,eAAe,CAAC;IAC7DN,OAAO,CAACe,mBAAmB,CAAC,UAAU,EAAEJ,YAAY,CAAC;IACrDd,cAAc,CAACK,OAAO,CAAC;EAC3B,CAAC;AACL;AACA,SAASQ,qBAAqBA,CAACM,EAAE,EAAE;EAC/BA,EAAE,CAACC,YAAY,CAACnB,iBAAiB,EAAE,EAAE,CAAC;AAC1C;AACA,SAASO,sBAAsBA,CAACW,EAAE,EAAE;EAChCA,EAAE,CAACE,eAAe,CAACpB,iBAAiB,CAAC;AACzC;AACA,SAASU,aAAaA,CAACC,MAAM,EAAE;EAC3B,IAAI,CAACA,MAAM,EAAE;IACT,OAAO,KAAK;EAChB;EACA,OAAOU,OAAO,CAACV,MAAM,IAAI,OAAOA,MAAM,KAAK,QAAQ,IAAI,WAAW,IAAIA,MAAM,IAAI,UAAU,IAAIA,MAAM,CAAC;AACzG"},"metadata":{},"sourceType":"module","externalDependencies":[]}
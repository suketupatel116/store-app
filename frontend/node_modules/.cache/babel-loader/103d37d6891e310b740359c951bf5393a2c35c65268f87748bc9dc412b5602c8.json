{"ast":null,"code":"import * as React from 'react';\nimport { ArrowLeft, Tab, ArrowRight, Escape } from '@fluentui/keyboard-keys';\nimport { getNativeElementProps, useEventCallback, useMergedRefs } from '@fluentui/react-utilities';\nimport { useMenuContext_unstable } from '../../contexts/menuContext';\nimport { dispatchMenuEnterEvent } from '../../utils/index';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\nimport { useIsSubmenu } from '../../utils/useIsSubmenu';\nimport { useRestoreFocusSource } from '@fluentui/react-tabster';\n/**\n * Create the state required to render MenuPopover.\n *\n * The returned state can be modified with hooks such as useMenuPopoverStyles_unstable,\n * before being passed to renderMenuPopover_unstable.\n *\n * @param props - props from this instance of MenuPopover\n * @param ref - reference to root HTMLElement of MenuPopover\n */\nexport const useMenuPopover_unstable = (props, ref) => {\n  const popoverRef = useMenuContext_unstable(context => context.menuPopoverRef);\n  const setOpen = useMenuContext_unstable(context => context.setOpen);\n  const open = useMenuContext_unstable(context => context.open);\n  const openOnHover = useMenuContext_unstable(context => context.openOnHover);\n  const triggerRef = useMenuContext_unstable(context => context.triggerRef);\n  const isSubmenu = useIsSubmenu();\n  const canDispatchCustomEventRef = React.useRef(true);\n  const throttleDispatchTimerRef = React.useRef(0);\n  const restoreFocusSourceAttributes = useRestoreFocusSource();\n  const {\n    dir\n  } = useFluent();\n  const CloseArrowKey = dir === 'ltr' ? ArrowLeft : ArrowRight;\n  // use DOM listener since react events propagate up the react tree\n  // no need to do `contains` logic as menus are all positioned in different portals\n  const mouseOverListenerCallbackRef = React.useCallback(node => {\n    if (node) {\n      // Dispatches the custom menu mouse enter event with throttling\n      // Needs to trigger on mouseover to support keyboard + mouse together\n      // i.e. keyboard opens submenus while cursor is still on the parent\n      node.addEventListener('mouseover', e => {\n        if (canDispatchCustomEventRef.current) {\n          canDispatchCustomEventRef.current = false;\n          dispatchMenuEnterEvent(popoverRef.current, e);\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore #16889 Node setTimeout type leaking\n          throttleDispatchTimerRef.current = setTimeout(() => canDispatchCustomEventRef.current = true, 250);\n        }\n      });\n    }\n  }, [popoverRef, throttleDispatchTimerRef]);\n  React.useEffect(() => {\n    () => clearTimeout(throttleDispatchTimerRef.current);\n  }, []);\n  var _useMenuContext_unstable;\n  const inline = (_useMenuContext_unstable = useMenuContext_unstable(context => context.inline)) !== null && _useMenuContext_unstable !== void 0 ? _useMenuContext_unstable : false;\n  const mountNode = useMenuContext_unstable(context => context.mountNode);\n  const rootProps = getNativeElementProps('div', {\n    role: 'presentation',\n    ...restoreFocusSourceAttributes,\n    ...props,\n    ref: useMergedRefs(ref, popoverRef, mouseOverListenerCallbackRef)\n  });\n  const {\n    onMouseEnter: onMouseEnterOriginal,\n    onKeyDown: onKeyDownOriginal\n  } = rootProps;\n  rootProps.onMouseEnter = useEventCallback(event => {\n    if (openOnHover) {\n      setOpen(event, {\n        open: true,\n        keyboard: false,\n        type: 'menuPopoverMouseEnter',\n        event\n      });\n    }\n    onMouseEnterOriginal === null || onMouseEnterOriginal === void 0 ? void 0 : onMouseEnterOriginal(event);\n  });\n  rootProps.onKeyDown = useEventCallback(event => {\n    const key = event.key;\n    if (key === Escape || isSubmenu && key === CloseArrowKey) {\n      var _popoverRef_current;\n      if (open && ((_popoverRef_current = popoverRef.current) === null || _popoverRef_current === void 0 ? void 0 : _popoverRef_current.contains(event.target))) {\n        setOpen(event, {\n          open: false,\n          keyboard: true,\n          type: 'menuPopoverKeyDown',\n          event\n        });\n        // stop propagation to avoid conflicting with other elements that listen for `Escape`\n        // e,g: Dialog, Popover and Tooltip\n        event.stopPropagation();\n      }\n    }\n    if (key === Tab) {\n      setOpen(event, {\n        open: false,\n        keyboard: true,\n        type: 'menuPopoverKeyDown',\n        event\n      });\n      if (!isSubmenu) {\n        var _triggerRef_current;\n        (_triggerRef_current = triggerRef.current) === null || _triggerRef_current === void 0 ? void 0 : _triggerRef_current.focus();\n      }\n    }\n    onKeyDownOriginal === null || onKeyDownOriginal === void 0 ? void 0 : onKeyDownOriginal(event);\n  });\n  return {\n    inline,\n    mountNode,\n    components: {\n      root: 'div'\n    },\n    root: rootProps\n  };\n};","map":{"version":3,"names":["React","ArrowLeft","Tab","ArrowRight","Escape","getNativeElementProps","useEventCallback","useMergedRefs","useMenuContext_unstable","dispatchMenuEnterEvent","useFluent_unstable","useFluent","useIsSubmenu","useRestoreFocusSource","useMenuPopover_unstable","props","ref","popoverRef","context","menuPopoverRef","setOpen","open","openOnHover","triggerRef","isSubmenu","canDispatchCustomEventRef","useRef","throttleDispatchTimerRef","restoreFocusSourceAttributes","dir","CloseArrowKey","mouseOverListenerCallbackRef","useCallback","node","addEventListener","e","current","setTimeout","useEffect","clearTimeout","_useMenuContext_unstable","inline","mountNode","rootProps","role","onMouseEnter","onMouseEnterOriginal","onKeyDown","onKeyDownOriginal","event","keyboard","type","key","_popoverRef_current","contains","target","stopPropagation","_triggerRef_current","focus","components","root"],"sources":["/Users/suketupatel/Desktop/application/frontend/node_modules/@fluentui/react-menu/lib/components/MenuPopover/useMenuPopover.js"],"sourcesContent":["import * as React from 'react';\nimport { ArrowLeft, Tab, ArrowRight, Escape } from '@fluentui/keyboard-keys';\nimport { getNativeElementProps, useEventCallback, useMergedRefs } from '@fluentui/react-utilities';\nimport { useMenuContext_unstable } from '../../contexts/menuContext';\nimport { dispatchMenuEnterEvent } from '../../utils/index';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\nimport { useIsSubmenu } from '../../utils/useIsSubmenu';\nimport { useRestoreFocusSource } from '@fluentui/react-tabster';\n/**\n * Create the state required to render MenuPopover.\n *\n * The returned state can be modified with hooks such as useMenuPopoverStyles_unstable,\n * before being passed to renderMenuPopover_unstable.\n *\n * @param props - props from this instance of MenuPopover\n * @param ref - reference to root HTMLElement of MenuPopover\n */ export const useMenuPopover_unstable = (props, ref)=>{\n    const popoverRef = useMenuContext_unstable((context)=>context.menuPopoverRef);\n    const setOpen = useMenuContext_unstable((context)=>context.setOpen);\n    const open = useMenuContext_unstable((context)=>context.open);\n    const openOnHover = useMenuContext_unstable((context)=>context.openOnHover);\n    const triggerRef = useMenuContext_unstable((context)=>context.triggerRef);\n    const isSubmenu = useIsSubmenu();\n    const canDispatchCustomEventRef = React.useRef(true);\n    const throttleDispatchTimerRef = React.useRef(0);\n    const restoreFocusSourceAttributes = useRestoreFocusSource();\n    const { dir  } = useFluent();\n    const CloseArrowKey = dir === 'ltr' ? ArrowLeft : ArrowRight;\n    // use DOM listener since react events propagate up the react tree\n    // no need to do `contains` logic as menus are all positioned in different portals\n    const mouseOverListenerCallbackRef = React.useCallback((node)=>{\n        if (node) {\n            // Dispatches the custom menu mouse enter event with throttling\n            // Needs to trigger on mouseover to support keyboard + mouse together\n            // i.e. keyboard opens submenus while cursor is still on the parent\n            node.addEventListener('mouseover', (e)=>{\n                if (canDispatchCustomEventRef.current) {\n                    canDispatchCustomEventRef.current = false;\n                    dispatchMenuEnterEvent(popoverRef.current, e);\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-ignore #16889 Node setTimeout type leaking\n                    throttleDispatchTimerRef.current = setTimeout(()=>canDispatchCustomEventRef.current = true, 250);\n                }\n            });\n        }\n    }, [\n        popoverRef,\n        throttleDispatchTimerRef\n    ]);\n    React.useEffect(()=>{\n        ()=>clearTimeout(throttleDispatchTimerRef.current);\n    }, []);\n    var _useMenuContext_unstable;\n    const inline = (_useMenuContext_unstable = useMenuContext_unstable((context)=>context.inline)) !== null && _useMenuContext_unstable !== void 0 ? _useMenuContext_unstable : false;\n    const mountNode = useMenuContext_unstable((context)=>context.mountNode);\n    const rootProps = getNativeElementProps('div', {\n        role: 'presentation',\n        ...restoreFocusSourceAttributes,\n        ...props,\n        ref: useMergedRefs(ref, popoverRef, mouseOverListenerCallbackRef)\n    });\n    const { onMouseEnter: onMouseEnterOriginal , onKeyDown: onKeyDownOriginal  } = rootProps;\n    rootProps.onMouseEnter = useEventCallback((event)=>{\n        if (openOnHover) {\n            setOpen(event, {\n                open: true,\n                keyboard: false,\n                type: 'menuPopoverMouseEnter',\n                event\n            });\n        }\n        onMouseEnterOriginal === null || onMouseEnterOriginal === void 0 ? void 0 : onMouseEnterOriginal(event);\n    });\n    rootProps.onKeyDown = useEventCallback((event)=>{\n        const key = event.key;\n        if (key === Escape || isSubmenu && key === CloseArrowKey) {\n            var _popoverRef_current;\n            if (open && ((_popoverRef_current = popoverRef.current) === null || _popoverRef_current === void 0 ? void 0 : _popoverRef_current.contains(event.target))) {\n                setOpen(event, {\n                    open: false,\n                    keyboard: true,\n                    type: 'menuPopoverKeyDown',\n                    event\n                });\n                // stop propagation to avoid conflicting with other elements that listen for `Escape`\n                // e,g: Dialog, Popover and Tooltip\n                event.stopPropagation();\n            }\n        }\n        if (key === Tab) {\n            setOpen(event, {\n                open: false,\n                keyboard: true,\n                type: 'menuPopoverKeyDown',\n                event\n            });\n            if (!isSubmenu) {\n                var _triggerRef_current;\n                (_triggerRef_current = triggerRef.current) === null || _triggerRef_current === void 0 ? void 0 : _triggerRef_current.focus();\n            }\n        }\n        onKeyDownOriginal === null || onKeyDownOriginal === void 0 ? void 0 : onKeyDownOriginal(event);\n    });\n    return {\n        inline,\n        mountNode,\n        components: {\n            root: 'div'\n        },\n        root: rootProps\n    };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}